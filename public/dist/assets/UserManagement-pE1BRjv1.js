import{c as g,r as l,q as h,z as o,d as V,j as e,U as p,t as u,X as B,k as H}from"./index-BhK_0Ess.js";import{U as k}from"./user-plus-DadrioX_.js";import{F as O}from"./funnel-sMLanqeW.js";import{S as R}from"./search-BPznE2y9.js";import{M as S}from"./mail-DOSsPXex.js";import{P as _}from"./phone-CZOD9Ogy.js";import{S as K}from"./save-oEz4vocL.js";const X=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],C=g("briefcase",X);const Y=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],G=g("shield",Y);const J=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],M=g("square-pen",J);const Q=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],W=g("trash-2",Q),Z=()=>{const[b,U]=l.useState([]),[z,D]=l.useState([]),[q,y]=l.useState(!0),[i,j]=l.useState({role:"",search:""}),[f,A]=l.useState(""),N=()=>{j(s=>({...s,search:f}))},[n,c]=l.useState(!1),[v,d]=l.useState(!1),[E,w]=l.useState(null),[t,r]=l.useState({name:"",email:"",phone:"",password:"",role:"citizen",category_id:""});l.useEffect(()=>{x(),P()},[i]);const x=async()=>{try{y(!0);const s=await h.getAll(i);U(s.data.data.data)}catch{o.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†")}finally{y(!1)}},P=async()=>{try{const s=await V.getAll();D(s.data.data)}catch{console.error("Failed to load categories")}},F=async s=>{s.preventDefault();try{const a={...t};a.role!=="employee"&&delete a.category_id,await h.create(a),o.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­"),c(!1),m(),x()}catch(a){o.error(a.response?.data?.message||"ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},T=async s=>{s.preventDefault();try{const a={...t};a.password||delete a.password,a.role!=="employee"&&(a.category_id=null),await h.update(E.id,a),o.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­"),d(!1),m(),x()}catch(a){o.error(a.response?.data?.message||"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},L=async s=>{if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ"))try{await h.delete(s),o.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­"),x()}catch(a){o.error(a.response?.data?.message||"ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},$=s=>{w(s),r({name:s.name,email:s.email,phone:s.phone,password:"",role:s.role,category_id:s.category_id||""}),d(!0)},m=()=>{r({name:"",email:"",phone:"",password:"",role:"citizen",category_id:""}),w(null)},I=s=>{const a={admin:{text:"Ù…Ø¯ÙŠØ±",color:"bg-gradient-to-r from-purple-500 to-indigo-600",icon:"ðŸ‘‘"},employee:{text:"Ù…ÙˆØ¸Ù",color:"bg-gradient-to-r from-blue-500 to-cyan-600",icon:"ðŸ‘¨â€ðŸ’¼"},citizen:{text:"Ù…ÙˆØ§Ø·Ù†",color:"bg-gradient-to-r from-gray-500 to-gray-600",icon:"ðŸ‘¤"}};return a[s]||a.citizen};return q?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-semibold",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 py-8",children:[e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"mb-8 animate-fade-in",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2 flex items-center gap-3",children:[e.jsx(p,{className:"w-10 h-10 text-blue-600"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"]}),e.jsx("p",{className:"text-gray-600",children:"Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 font-bold",children:[e.jsx(k,{className:"w-5 h-5"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-xl p-6 mb-8 border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(O,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(R,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŒ Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ...",value:f,onChange:s=>A(s.target.value),onKeyDown:s=>s.key==="Enter"&&N(),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all"})]}),e.jsx("button",{onClick:N,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-bold whitespace-nowrap",children:"Ø¨Ø­Ø«"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:i.role,onChange:s=>j({...i,role:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all appearance-none",children:[e.jsx("option",{value:"",children:"ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"}),e.jsx("option",{value:"employee",children:"Ù…ÙˆØ¸Ù"}),e.jsx("option",{value:"citizen",children:"Ù…ÙˆØ§Ø·Ù†"})]}),e.jsx(u,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 pointer-events-none"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-xl overflow-hidden border border-gray-200/50",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:"Ø§Ù„ØªØ®ØµØµ (Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†)"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map(s=>{const a=I(s.role);return e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-md",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: #",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold text-white shadow-sm ${a.color}`,children:[e.jsx("span",{children:a.icon}),a.text]})}),e.jsx("td",{className:"px-6 py-4",children:s.role==="employee"&&s.category?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:[e.jsx(C,{className:"w-3 h-3"}),s.category.name_ar||s.category.name]}):s.role==="employee"?e.jsx("span",{className:"text-gray-400 text-sm italic",children:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}):e.jsx("span",{className:"text-gray-300",children:"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(S,{className:"w-3 h-3"}),s.email]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(_,{className:"w-3 h-3"}),s.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.created_at).toLocaleDateString("ar-SY")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>$(s),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"ØªØ¹Ø¯ÙŠÙ„",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(s.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Ø­Ø°Ù",children:e.jsx(W,{className:"w-4 h-4"})})]})})]},s.id)})})]})}),b.length===0&&e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(p,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø·Ø§Ø¨Ù‚ÙŠÙ† Ù„Ù„Ø¨Ø­Ø«"})]})]})]}),(n||v)&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n?e.jsx(k,{className:"w-6 h-6"}):e.jsx(M,{className:"w-6 h-6"}),n?"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯":"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"]}),e.jsx("button",{onClick:()=>{c(!1),d(!1),m()},className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(B,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:n?F:T,className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",required:!0,value:t.name,onChange:s=>r({...t,name:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:t.email,onChange:s=>r({...t,email:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"example@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",required:!0,value:t.phone,onChange:s=>r({...t,phone:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"09xxxxxxxx"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:v?"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„ÙŠØ©)":"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",required:n,value:t.password,onChange:s=>r({...t,password:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"********",minLength:6})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:t.role,onChange:s=>r({...t,role:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all appearance-none",children:[e.jsx("option",{value:"citizen",children:"Ù…ÙˆØ§Ø·Ù†"}),e.jsx("option",{value:"employee",children:"Ù…ÙˆØ¸Ù"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),e.jsx(u,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),t.role==="employee"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„ØªØ®ØµØµ"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute right-4 top-3.5 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:t.category_id,onChange:s=>r({...t,category_id:s.target.value}),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all appearance-none",required:t.role==="employee",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ..."}),z.map(s=>e.jsx("option",{value:s.id,children:s.name_ar||s.name},s.id))]}),e.jsx(u,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 pointer-events-none"})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 rounded-xl font-bold hover:shadow-lg transition-all hover:-translate-y-0.5 flex justify-center items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),n?"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"]}),e.jsx("button",{type:"button",onClick:()=>{c(!1),d(!1),m()},className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-xl font-bold hover:bg-gray-200 transition-all",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})]})},ne=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{M as S,W as T,Z as U,ne as a};
