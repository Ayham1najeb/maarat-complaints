import{c as g,v as j,u as f,r as i,m as y,z as N,j as e,b as o}from"./index--2DsGzqA.js";import{C as v}from"./calendar-BpkX1Yyy.js";import{F as w,T as _}from"./trending-up-Da1WkogD.js";import{M as m}from"./map-pin-BSB2svgR.js";import{T as k}from"./tag-CGHDhBNz.js";import{C}from"./circle-alert-BZ3XI1Ut.js";import{C as S}from"./circle-check-big-BHQoa7_w.js";import{E as z}from"./eye-Dm0jCNm4.js";import{C as D}from"./clock-BRBFcUUj.js";const A=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],x=g("arrow-right",A);const I=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$=g("message-square",I),R=()=>{const{id:n}=j(),c=f(),[s,h]=i.useState(null),[p,d]=i.useState(!0);i.useEffect(()=>{b()},[n]);const b=async()=>{try{d(!0);const t=await y.getById(n);h(t.data.data)}catch{N.error("فشل تحميل تفاصيل الشكوى"),c("/dashboard")}finally{d(!1)}},r=t=>{const a={pending:{text:"جديدة",color:"bg-yellow-100 text-yellow-800",icon:D},in_review:{text:"قيد المراجعة",color:"bg-blue-100 text-blue-800",icon:z},in_progress:{text:"قيد المعالجة",color:"bg-purple-100 text-purple-800",icon:_},resolved:{text:"تم الحل",color:"bg-green-100 text-green-800",icon:S},rejected:{text:"مرفوضة",color:"bg-red-100 text-red-800",icon:C}};return a[t]||a.pending};if(p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"})});if(!s)return null;const l=r(s.status),u=l.icon;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>c("/dashboard"),className:"flex items-center text-gray-600 hover:text-blue-600 mb-6 transition-colors",children:[e.jsx(x,{className:"w-5 h-5 ml-2"}),"عودة للوحة التحكم"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-mono font-bold",children:["#",s.tracking_number]}),e.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${l.color}`,children:[e.jsx(u,{className:"w-4 h-4"}),l.text]})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.title})]}),e.jsx("div",{className:"text-left md:text-right text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 mb-1",children:[e.jsx(v,{className:"w-4 h-4"}),new Date(s.created_at).toLocaleDateString("ar-SY",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-blue-600"}),"تفاصيل الشكوى"]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.description})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-red-500"}),"الموقع"]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 text-gray-700",children:s.location_address})]}),s.images&&s.images.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"المرفقات"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:s.images.map((t,a)=>e.jsx("a",{href:`http://localhost:8000/storage/${t.image_path}`,target:"_blank",rel:"noopener noreferrer",className:"block aspect-square rounded-xl overflow-hidden border-2 border-gray-100 hover:border-blue-500 transition-all",children:e.jsx("img",{src:`http://localhost:8000/storage/${t.image_path}`,alt:`مرفق ${a+1}`,className:"w-full h-full object-cover"})},a))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-5 border border-blue-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600"}),"معلومات المواطن"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"الاسم"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.citizen_name||s.user?.name||"غير متوفر"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"رقم الهاتف"}),e.jsx("p",{className:"font-medium text-gray-900",dir:"ltr",children:s.citizen_phone||s.user?.phone||"غير متوفر"})]}),s.citizen_email&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"البريد الإلكتروني"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.citizen_email})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-500 mb-2 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"التصنيف"]}),e.jsx("span",{className:"inline-block px-3 py-1 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-700",children:s.category?.name||s.category})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-500 mb-2 flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"المنطقة"]}),e.jsx("span",{className:"inline-block px-3 py-1 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-700",children:s.area?.name||"غير محدد"})]})]})}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-5 border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-purple-600"}),"الموظف المسؤول"]}),s.assignment?.assigned_to?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-200 rounded-full flex items-center justify-center text-purple-700 font-bold",children:s.assignment.assigned_to.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.assignment.assigned_to.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["تم التعيين في ",new Date(s.assignment.created_at).toLocaleDateString("ar-SY")]})]})]}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"لم يتم تعيين موظف بعد"})]})]})]}),s.updates&&s.updates.length>0&&e.jsxs("div",{className:"border-t border-gray-100 p-6 bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-blue-600"}),"سجل التحديثات"]}),e.jsx("div",{className:"space-y-6",children:s.updates.map(t=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-xs font-bold",children:t.user?.name?.charAt(0)||"S"})}),e.jsxs("div",{className:"flex-1 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.user?.name||"النظام"}),e.jsx("span",{className:"text-xs text-gray-500 mr-2",children:new Date(t.created_at).toLocaleDateString("ar-SY",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:r(t.old_status).text}),e.jsx(x,{className:"w-3 h-3 text-gray-400 mt-1"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${r(t.new_status).color}`,children:r(t.new_status).text})]})]}),e.jsx("p",{className:"text-gray-700 text-sm",children:t.comment})]})]},t.id))})]})]})]})})};export{R as default};
