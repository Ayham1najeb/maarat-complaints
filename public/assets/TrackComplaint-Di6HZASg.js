import{c as j,g as v,r as l,z as o,f as _,j as e}from"./index-BKYsXAFU.js";import{S as i}from"./search-DHCrfClf.js";import{F as k}from"./funnel-D0D11wlF.js";import{C as p}from"./calendar-Df3w0yvb.js";import{M as u}from"./map-pin-CU2hC28z.js";import{E as C}from"./eye-Bsc7_a4T.js";import{C as S}from"./circle-check-big-PkRKkDe9.js";import{C as f}from"./circle-alert-CV0JevIG.js";import{C as D}from"./clock-VtfAUNu6.js";const $=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],I=j("circle-x",$);const L=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],z=j("download",L),H=()=>{const[m]=v(),[n,N]=l.useState(m.get("number")||""),[s,x]=l.useState(null),[c,g]=l.useState(!1),[d,y]=l.useState(!1);l.useEffect(()=>{m.get("number")&&h()},[]);const h=async r=>{if(r&&r.preventDefault(),!n.trim()){o.error("الرجاء إدخال رقم التتبع");return}g(!0);try{const a=await _.track(n);x(a.data.data),o.success("تم العثور على الشكوى بنجاح")}catch(a){o.error(a.response?.data?.message||"رقم التتبع غير صحيح"),x(null)}finally{g(!1)}},t=r=>{const a={pending:{text:"جديدة",color:"bg-yellow-100 text-yellow-800 border-yellow-300",icon:e.jsx(D,{className:"w-5 h-5"})},in_review:{text:"قيد المراجعة",color:"bg-blue-100 text-blue-800 border-blue-300",icon:e.jsx(f,{className:"w-5 h-5"})},in_progress:{text:"قيد المعالجة",color:"bg-purple-100 text-purple-800 border-purple-300",icon:e.jsx(f,{className:"w-5 h-5"})},resolved:{text:"تم الحل",color:"bg-green-100 text-green-800 border-green-300",icon:e.jsx(S,{className:"w-5 h-5"})},rejected:{text:"مرفوضة",color:"bg-red-100 text-red-800 border-red-300",icon:e.jsx(I,{className:"w-5 h-5"})}};return a[r]||a.pending},b=r=>{const a={low:{text:"منخفضة",color:"bg-gray-100 text-gray-800 border-gray-300"},medium:{text:"متوسطة",color:"bg-blue-100 text-blue-800 border-blue-300"},high:{text:"عالية",color:"bg-orange-100 text-orange-800 border-orange-300"},urgent:{text:"عاجلة",color:"bg-red-100 text-red-800 border-red-300"}};return a[r]||a.medium},w=()=>{o.success("جاري تحميل تفاصيل الشكوى...")};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-md",children:e.jsx(i,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-3",children:"تتبع حالة الشكوى"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"ادخل رقم التتبع لمتابعة أحدث التحديثات على شكواك"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border border-gray-200",children:e.jsx("form",{onSubmit:h,className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:n,onChange:r=>N(r.target.value),placeholder:"أدخل رقم التتبع (مثال: CM1234567890)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white text-base font-medium"}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(k,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 hover:shadow-md disabled:hover:shadow-none flex items-center gap-2 min-w-[140px] justify-center",children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري البحث..."]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-4 h-4"}),"تتبع الشكوى"]})})]})})}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"bg-blue-600 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-white mb-2 leading-tight",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-blue-100 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("ar-SY")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s.location_address})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsxs("span",{className:`px-4 py-2 rounded-lg font-semibold text-sm border flex items-center gap-2 ${t(s.status).color}`,children:[t(s.status).icon,t(s.status).text]}),e.jsx("span",{className:`px-4 py-2 rounded-lg font-semibold text-sm border text-center ${b(s.priority).color}`,children:b(s.priority).text})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 border border-blue-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-1",children:"رقم التتبع"}),e.jsx("code",{className:"text-2xl font-mono font-bold text-blue-700",children:s.tracking_number})]}),e.jsxs("button",{onClick:w,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 hover:shadow-md flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"تحميل التفاصيل"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 border-r-2 border-blue-500 pr-2",children:"معلومات الشكوى"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"التصنيف:"}),e.jsxs("span",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[s.category?.icon," ",s.category?.name_ar]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"تاريخ التقديم:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:new Date(s.created_at).toLocaleDateString("ar-SY")})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"الموقع:"}),e.jsxs("span",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4 text-red-500"}),s.location_address]})]}),s.area&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"المنطقة:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:s.area.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 border-r-2 border-blue-500 pr-2",children:"وصف المشكلة"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})})]})]}),s.images&&s.images.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 border-r-2 border-blue-500 pr-2",children:"الصور المرفقة"}),e.jsxs("button",{onClick:()=>y(!d),className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),d?"إخفاء الصور":"عرض الصور"]})]}),d&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.images.map((r,a)=>e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 border border-gray-300 transition-all duration-200 group-hover:border-blue-400 group-hover:shadow-sm",children:[e.jsx("img",{src:`http://localhost:8000/storage/${r.image_path}`,alt:`صورة ${a+1}`,className:"w-full h-40 object-cover rounded-md cursor-pointer transition-all duration-200 group-hover:scale-[1.02]",onClick:()=>window.open(`http://localhost:8000/storage/${r.image_path}`,"_blank")}),e.jsxs("div",{className:"absolute top-3 right-3 bg-black/80 text-white px-2 py-1 rounded text-xs font-medium",children:["صورة ",a+1]})]})},a))})]})]})]}),s.updates&&s.updates.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 border-r-2 border-blue-500 pr-2",children:"سجل التحديثات"}),e.jsx("div",{className:"space-y-4",children:s.updates.map((r,a)=>e.jsxs("div",{className:"relative flex gap-4 group",children:[a!==s.updates.length-1&&e.jsx("div",{className:"absolute left-5 top-10 w-0.5 h-full bg-blue-200"}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 relative z-10 shadow-sm ${t(r.new_status).color}`,children:t(r.new_status).icon}),e.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-4 border border-gray-200 transition-all duration-200 group-hover:border-blue-300 group-hover:shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-lg font-semibold text-sm border ${t(r.new_status).color}`,children:t(r.new_status).text}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[e.jsx(p,{className:"w-3 h-3"}),e.jsx("span",{className:"font-medium",children:new Date(r.created_at).toLocaleDateString("ar-SY")}),e.jsx("span",{children:new Date(r.created_at).toLocaleTimeString("ar-SY")})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.comment})]})]},a))})]})]}),!s&&!c&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(i,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-3",children:"ادخل رقم التتبع للبحث"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"استخدم رقم التتبع الموجود في رسالة التأكيد لمتابعة حالة شكواك"})]})]})})};export{H as default};
